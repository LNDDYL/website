{% extends "AdminBundle:Base:show.html.twig" %}

{% block title %}AndroIRC beta - {{ entity.getVersion }}{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Location');
            data.addColumn('number', 'Downloads');

            data.addRows({{ repartition | length }});
            {% for row in repartition -%}
            data.setValue({{ loop.index0 }}, 0, '{{ row.location }}');
            data.setValue({{ loop.index0 }}, 1, {{ row.downloadsCount }});
            {% endfor %}

            var options = {
                width: 500,
                height: 300,
                backgroundColor: '#f5f5f5',
            };

            var chart = new google.visualization.PieChart(document.getElementById('chart'));
            chart.draw(data, options);
        }
    </script>
{% endblock %}

{% block content %}
    <table class="records_list">
        <thead>
            <tr>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <thead>
            <tr>
                <td>Version</td>
                <td>{{ entity.getVersion }}</td>
            </tr>
            <tr>
                <td>Downloadable</td>
                <td>
                    {% if (entity.isDownloadable) %}
                        <img src="{{ asset('bundles/andro/images/icons/tick.png') }}" />
                    {% else %}
                        <img src="{{ asset('bundles/andro/images/icons/cross.png') }}" />
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td>Revision</td>
                <td>{{ entity.getRevision }}</td>
            </tr>
            <tr>
                <td>Downloads</td>
                <td>{{ entity.getDownloads | length }}</td>
            </tr>
            <tr>
                <td>Repartition</td>
                <td><div id="chart"></div></td>
            </tr>
        </thead>
    </table>
{% endblock %}